using System.Net.Http;
using System.Threading.Tasks;

namespace ExpressYourself.services;
//This class makes a random request for the api
public static class RT //Stands for REQUEST TEST
{
    private static Random random = new Random();
    private static String url = "http://localhost:5289/";
    private static readonly HttpClient client = new HttpClient();
    private static string[] ips = {
    "89.141.160.223",
    "80.209.29.44",
    "139.36.219.186",
    "175.167.125.47",
    "136.117.22.161",
    "31.40.78.59",
    "26.84.237.102",
    "225.161.205.95",
    "69.32.78.92",
    "52.193.172.120",
    "132.102.75.206",
    "46.8.13.2",
    "49.253.112.121",
    "27.184.201.95",
    "78.87.12.133",
    "23.120.176.23",
    "33.79.58.109",
    "201.229.68.197",
    "227.46.249.249",
    "45.84.191.249",
    "0.240.217.126",
    "128.63.36.146",
    "111.86.206.56",
    "168.19.67.151",
    "111.222.178.222",
    "102.183.7.174",
    "127.154.68.108",
    "181.48.91.165",
    "198.40.75.234",
    "44.170.196.179",
    "91.77.237.222",
    "185.246.205.30",
    "237.226.170.241",
    "229.172.4.57",
    "70.42.52.106",
    "130.255.181.179",
    "87.0.79.13",
    "131.60.19.7",
    "9.235.170.93",
    "124.244.239.123",
    "25.227.39.4",
    "14.251.69.60",
    "79.212.9.86",
    "203.185.236.221",
    "243.162.113.142",
    "14.38.146.140",
    "48.171.61.252",
    "77.180.201.35",
    "199.106.156.246",
    "151.48.148.60",
    "202.41.231.231",
    "77.57.85.209",
    "209.139.64.89",
    "246.146.213.118",
    "152.192.232.124",
    "240.194.122.65",
    "47.18.159.255",
    "149.23.184.99",
    "181.135.5.242",
    "107.135.203.75",
    "228.112.238.159",
    "250.134.57.15",
    "65.32.48.50",
    "27.46.161.9",
    "87.137.102.241",
    "4.85.103.117",
    "225.163.66.141",
    "163.205.220.53",
    "20.24.39.0",
    "53.130.235.244",
    "217.12.218.223",
    "9.79.157.192",
    "236.176.88.29",
    "11.136.100.46",
    "42.180.253.238",
    "187.204.47.212",
    "216.57.144.183",
    "78.26.128.75",
    "154.68.25.174",
    "144.36.106.254",
    "26.146.14.216",
    "113.144.113.208",
    "241.221.229.30",
    "158.166.220.113",
    "226.29.155.224",
    "95.2.195.81",
    "9.243.8.77",
    "123.189.68.62",
    "186.165.168.58",
    "23.87.100.165",
    "191.10.190.119",
    "128.91.218.208",
    "88.182.116.176",
    "203.139.113.82",
    "156.8.44.235",
    "60.13.7.205",
    "40.119.160.34",
    "208.244.26.247",
    "9.98.171.140",
    "143.144.120.106",
    "243.198.148.28",
    "87.66.6.179",
    "155.100.194.202",
    "48.108.23.147",
    "125.58.13.25",
    "5.222.30.215",
    "143.175.88.153",
    "180.110.13.20",
    "232.221.220.117",
    "162.248.169.234",
    "13.167.223.172",
    "83.164.8.1",
    "110.252.119.187",
    "210.103.226.4",
    "255.141.68.90",
    "101.113.115.204",
    "16.195.143.32",
    "50.106.175.166",
    "139.56.189.156",
    "24.112.225.134",
    "254.130.243.81",
    "162.86.61.59",
    "158.243.14.240",
    "212.217.158.32",
    "182.139.232.228",
    "22.151.215.23",
    "170.82.159.7",
    "208.62.74.91",
    "144.116.108.6",
    "162.137.3.41",
    "178.235.107.94",
    "30.68.16.65",
    "65.247.194.245",
    "75.148.41.9",
    "58.18.121.206",
    "210.23.40.171",
    "5.165.240.2",
    "197.68.67.75",
    "146.5.71.195",
    "223.128.30.249",
    "8.87.40.91",
    "34.238.165.76",
    "235.61.112.61",
    "199.49.149.226",
    "195.194.140.83",
    "27.197.38.223",
    "42.57.187.166",
    "226.121.86.10",
    "54.64.218.166",
    "28.209.178.60",
    "226.170.86.157",
    "161.97.16.153",
    "218.15.5.161",
    "252.232.217.69",
    "33.195.18.3",
    "234.76.9.76",
    "91.237.168.200",
    "170.43.108.143",
    "151.76.106.89",
    "201.16.223.167",
    "220.245.28.202",
    "201.44.18.66",
    "14.192.71.91",
    "194.175.172.183",
    "114.153.206.114",
    "138.165.10.200",
    "208.229.28.147",
    "55.211.189.60",
    "47.107.49.108",
    "40.143.36.27",
    "199.55.56.107",
    "11.139.58.170",
    "89.108.133.225",
    "67.93.207.226",
    "8.253.113.167",
    "88.133.83.23",
    "26.199.222.75",
    "17.196.0.47",
    "213.164.73.150",
    "62.134.108.209",
    "131.177.90.211",
    "160.167.82.49",
    "90.57.70.86",
    "209.245.138.128",
    "131.72.240.37",
    "180.157.224.61",
    "199.170.182.204",
    "198.77.5.239",
    "210.228.219.116",
    "144.79.254.68",
    "92.113.3.217",
    "203.208.49.146",
    "206.85.19.149",
    "75.235.70.94",
    "207.255.142.82",
    "26.188.55.1",
    "6.143.115.99",
    "124.141.216.40",
    "16.90.141.191",
    "211.156.93.143"
    }; //Possible IPs (200)
   //Return a random IP from the array and to request its origin from the API
   public static async Task<String?> ReqRandomIP()
   {
        Console.WriteLine("[RequestTest]Getting random IP..");
            String nIp = GetRandomIP();
            Console.WriteLine($"[RequestTest]Selected IP: {nIp}");
            try
            {
                Console.WriteLine("[RequestTest]Trying Requisition..");
                HttpResponseMessage response = await client.GetAsync(url + nIp); //trying requisition
                string responseData = await response.Content.ReadAsStringAsync();
                Console.WriteLine($"Response: {responseData}");
                Console.WriteLine("[RequestTest]Requisistion Successed!");
            }
            catch(Exception err)
            {
                Console.WriteLine(err.Message);
                Console.WriteLine("[RequestTest]Requisistion Failed");
            }
        return "Failed";
   }

   private static String GetRandomIP()
   {
        return ips[random.Next(ips.Length)];
   }
}